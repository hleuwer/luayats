<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Luayats: src/rstp/rstp_bridge.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>src/rstp/rstp_bridge.h</h1><a href="rstp__bridge_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*</span>
<a name="l00003"></a>00003 <span class="comment">*  Luayats - Yet Another Tiny Simulator </span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">**************************************************************************</span>
<a name="l00006"></a>00006 <span class="comment">*</span>
<a name="l00007"></a>00007 <span class="comment">*    Copyright (C) 1995-2005 </span>
<a name="l00008"></a>00008 <span class="comment">*    - Chair for Telecommunications</span>
<a name="l00009"></a>00009 <span class="comment">*      Dresden University of Technolog, D-01062 Dresden, Germany</span>
<a name="l00010"></a>00010 <span class="comment">*    - Marconi Ondata GmbH, D-71522 Backnang, Germany</span>
<a name="l00011"></a>00011 <span class="comment">*   </span>
<a name="l00012"></a>00012 <span class="comment">**************************************************************************</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*   This program is free software; you can redistribute it and/or modify</span>
<a name="l00015"></a>00015 <span class="comment">*   it under the terms of the GNU General Public License as published by</span>
<a name="l00016"></a>00016 <span class="comment">*   the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00017"></a>00017 <span class="comment">*   (at your option) any later version.</span>
<a name="l00018"></a>00018 <span class="comment">*</span>
<a name="l00019"></a>00019 <span class="comment">*   This program is distributed in the hope that it will be useful,</span>
<a name="l00020"></a>00020 <span class="comment">*   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00021"></a>00021 <span class="comment">*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00022"></a>00022 <span class="comment">*   GNU General Public License for more details.</span>
<a name="l00023"></a>00023 <span class="comment">*</span>
<a name="l00024"></a>00024 <span class="comment">*   You should have received a copy of the GNU General Public License</span>
<a name="l00025"></a>00025 <span class="comment">*   along with this program; if not, write to the Free Software</span>
<a name="l00026"></a>00026 <span class="comment">*   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l00027"></a>00027 <span class="comment">*</span>
<a name="l00028"></a>00028 <span class="comment">*************************************************************************</span>
<a name="l00029"></a>00029 <span class="comment">*</span>
<a name="l00030"></a>00030 <span class="comment">*   Module author: Herbert Leuwer</span>
<a name="l00031"></a>00031 <span class="comment">*</span>
<a name="l00032"></a>00032 <span class="comment">*************************************************************************</span>
<a name="l00033"></a>00033 <span class="comment">*</span>
<a name="l00034"></a>00034 <span class="comment">*   Module description: Rapid Spanning Tree Protocol Bridge</span>
<a name="l00035"></a>00035 <span class="comment">*</span>
<a name="l00036"></a>00036 <span class="comment">*   The actual protocol machine is based on RSTPLIB by Alex Rozin.</span>
<a name="l00037"></a>00037 <span class="comment">*   This module provides a wrapper class &apos;rstp_bridge&apos; around the </span>
<a name="l00038"></a>00038 <span class="comment">*   state machines.</span>
<a name="l00039"></a>00039 <span class="comment">*   See the Luayats documentation for a detailed description of the </span>
<a name="l00040"></a>00040 <span class="comment">*   architecture.</span>
<a name="l00041"></a>00041 <span class="comment">*</span>
<a name="l00042"></a>00042 <span class="comment">*************************************************************************/</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#ifndef _RSTP_BRIDGE_H</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#define _RSTP_BRIDGE_H</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;stdlib.h&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="base_8h.html">base.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="bitmap_8h.html">bitmap.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="stpm_8h.html">stpm.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="uid__stp_8h.html">uid_stp.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="stp__in_8h.html">stp_in.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="stp__to_8h.html">stp_to.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="stp__bpdu_8h.html">stp_bpdu.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;tolua++.h&quot;</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00060"></a>00060 <span class="preprocessor">#endif</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">#include &quot;lua.h&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>}
<a name="l00064"></a>00064 <span class="preprocessor">#endif</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#ifdef this</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#undef this</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="rstp__bridge_8h.html#a974a067ac7e6511dec479c5a3aaf381f">00069</a> <span class="preprocessor">#define lua_Object int</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#ifndef _nports</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#define _nports</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 LUALIB_API <span class="keywordtype">int</span> <a class="code" href="rstp__bridge_8c.html#aa8cd816bd59ea6089841c37e2268858f">luaopen_rstp</a>(lua_State *L);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">//tolua_begin</span>
<a name="l00077"></a>00077 <span class="keywordtype">int</span> <a class="code" href="rstp__bridge_8c.html#ab0a5187608fa8e3c5d839dbd11ce8b73">speed2pcost</a>(<span class="keywordtype">int</span> speed);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">// A couple of encapsulating helper classes to simplify Lua interfacing</span>
<a name="l00080"></a><a class="code" href="classstpcfg.html">00080</a> <span class="keyword">class </span><a class="code" href="classstpcfg.html">stpcfg</a> { 
<a name="l00081"></a>00081  <span class="keyword">public</span>:
<a name="l00082"></a><a class="code" href="classstpcfg.html#a462e8a36569fc85d6e79b9048946581d">00082</a>    <a class="code" href="classstpcfg.html#a462e8a36569fc85d6e79b9048946581d">stpcfg</a>(){<a class="code" href="defs_8h.html#a763ffd798508592c5092ac77daa5a659">CHECK</a>(<a class="code" href="classstpcfg.html#aceecf944dc850ac292dc538f23e8f100">val</a> = <span class="keyword">new</span> <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a>);}
<a name="l00083"></a><a class="code" href="classstpcfg.html#ac9a8802019f225cc50d0195992d1e3d8">00083</a>    <a class="code" href="classstpcfg.html#ac9a8802019f225cc50d0195992d1e3d8">~stpcfg</a>(){<span class="keyword">delete</span> <a class="code" href="classstpcfg.html#aceecf944dc850ac292dc538f23e8f100">val</a>;}
<a name="l00084"></a><a class="code" href="classstpcfg.html#aceecf944dc850ac292dc538f23e8f100">00084</a>    <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a> *<a class="code" href="classstpcfg.html#aceecf944dc850ac292dc538f23e8f100">val</a>;
<a name="l00085"></a>00085 };
<a name="l00086"></a><a class="code" href="classstpmstate.html">00086</a> <span class="keyword">class </span><a class="code" href="classstpmstate.html">stpmstate</a> {
<a name="l00087"></a>00087  <span class="keyword">public</span>:
<a name="l00088"></a><a class="code" href="classstpmstate.html#ad2c603b0f396fb99b9eb3941bfbf8406">00088</a>    <a class="code" href="classstpmstate.html#ad2c603b0f396fb99b9eb3941bfbf8406">stpmstate</a>(){<a class="code" href="defs_8h.html#a763ffd798508592c5092ac77daa5a659">CHECK</a>(<a class="code" href="classstpmstate.html#af8a8f2fe74470426ad3ca328823a02a0">val</a> = <span class="keyword">new</span> <a class="code" href="structUID__STP__STATE__T.html">UID_STP_STATE_T</a>);}
<a name="l00089"></a><a class="code" href="classstpmstate.html#a88cf64bf1b93b69262f7ff5be7901baa">00089</a>    <a class="code" href="classstpmstate.html#a88cf64bf1b93b69262f7ff5be7901baa">~stpmstate</a>(){<span class="keyword">delete</span> <a class="code" href="classstpmstate.html#af8a8f2fe74470426ad3ca328823a02a0">val</a>;}
<a name="l00090"></a><a class="code" href="classstpmstate.html#af8a8f2fe74470426ad3ca328823a02a0">00090</a>    <a class="code" href="structUID__STP__STATE__T.html">UID_STP_STATE_T</a> *<a class="code" href="classstpmstate.html#af8a8f2fe74470426ad3ca328823a02a0">val</a>;
<a name="l00091"></a>00091 };
<a name="l00092"></a><a class="code" href="classportcfg.html">00092</a> <span class="keyword">class </span><a class="code" href="classportcfg.html">portcfg</a> {
<a name="l00093"></a>00093  <span class="keyword">public</span>:
<a name="l00094"></a><a class="code" href="classportcfg.html#a53372153a04f8da39f13dded50552cf0">00094</a>    <a class="code" href="classportcfg.html#a53372153a04f8da39f13dded50552cf0">portcfg</a>(){<a class="code" href="defs_8h.html#a763ffd798508592c5092ac77daa5a659">CHECK</a>(<a class="code" href="classportcfg.html#a076833a1cfee6fec7bc2e19935bcacdd">val</a> = <span class="keyword">new</span> <a class="code" href="structUID__STP__PORT__CFG__T.html">UID_STP_PORT_CFG_T</a>);}
<a name="l00095"></a><a class="code" href="classportcfg.html#a26160e09d5db07fbb278e92ce9a3b19b">00095</a>    <a class="code" href="classportcfg.html#a26160e09d5db07fbb278e92ce9a3b19b">~portcfg</a>(){<span class="keyword">delete</span> <a class="code" href="classportcfg.html#a076833a1cfee6fec7bc2e19935bcacdd">val</a>;}
<a name="l00096"></a><a class="code" href="classportcfg.html#a076833a1cfee6fec7bc2e19935bcacdd">00096</a>    <a class="code" href="structUID__STP__PORT__CFG__T.html">UID_STP_PORT_CFG_T</a> *<a class="code" href="classportcfg.html#a076833a1cfee6fec7bc2e19935bcacdd">val</a>;
<a name="l00097"></a><a class="code" href="classportcfg.html#ae49d4312c2e1ae49d2bedbebf3ff00ae">00097</a>    <span class="keywordtype">void</span> <a class="code" href="classportcfg.html#ae49d4312c2e1ae49d2bedbebf3ff00ae">setbm</a>(<span class="keywordtype">int</span> bm){
<a name="l00098"></a>00098      this-&gt;<a class="code" href="classportcfg.html#a076833a1cfee6fec7bc2e19935bcacdd">val</a>-&gt;<a class="code" href="structUID__STP__PORT__CFG__T.html#afcdda814450556bac73b25575d38d9f2">port_bmp</a>.<a class="code" href="structtagBITMAP.html#a88f90e3dcbbe609f69a723f6811c99df">part0</a> = (<span class="keywordtype">unsigned</span> long) bm;
<a name="l00099"></a>00099    }
<a name="l00100"></a>00100 };
<a name="l00101"></a>00101  
<a name="l00102"></a><a class="code" href="classportstate.html">00102</a> <span class="keyword">class </span><a class="code" href="classportstate.html">portstate</a> {
<a name="l00103"></a>00103  <span class="keyword">public</span>:
<a name="l00104"></a><a class="code" href="classportstate.html#aaad89d47aa12c50bc5a4db73c9bce6f9">00104</a>    <a class="code" href="classportstate.html#aaad89d47aa12c50bc5a4db73c9bce6f9">portstate</a>(){<a class="code" href="defs_8h.html#a763ffd798508592c5092ac77daa5a659">CHECK</a>(<a class="code" href="classportstate.html#a1b822a4fdb326c0bcddfec59edd808e2">val</a> = <span class="keyword">new</span> <a class="code" href="structUID__STP__PORT__STATE__T.html">UID_STP_PORT_STATE_T</a>);};
<a name="l00105"></a><a class="code" href="classportstate.html#a56194f6a774bff845521e1e1a467a781">00105</a>    <a class="code" href="classportstate.html#a56194f6a774bff845521e1e1a467a781">~portstate</a>(){<span class="keyword">delete</span> <a class="code" href="classportstate.html#a1b822a4fdb326c0bcddfec59edd808e2">val</a>;}
<a name="l00106"></a><a class="code" href="classportstate.html#a1b822a4fdb326c0bcddfec59edd808e2">00106</a>    <a class="code" href="structUID__STP__PORT__STATE__T.html">UID_STP_PORT_STATE_T</a> *<a class="code" href="classportstate.html#a1b822a4fdb326c0bcddfec59edd808e2">val</a>;
<a name="l00107"></a>00107 };
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="classmacaddress.html">00109</a> <span class="keyword">class </span><a class="code" href="classmacaddress.html">macaddress</a> {
<a name="l00110"></a>00110  <span class="keyword">public</span>:
<a name="l00111"></a><a class="code" href="classmacaddress.html#a7d59dfef25e6f4831cd75334bcaa1368">00111</a>   <span class="keyword">inline</span> <a class="code" href="classmacaddress.html#a7d59dfef25e6f4831cd75334bcaa1368">macaddress</a>(<span class="keywordtype">int</span> b1,<span class="keywordtype">int</span> b2,<span class="keywordtype">int</span> b3,<span class="keywordtype">int</span> b4,<span class="keywordtype">int</span> b5,<span class="keywordtype">int</span> b6){
<a name="l00112"></a>00112     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[0] = (char ) b1;
<a name="l00113"></a>00113     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[1] = (char ) b2;
<a name="l00114"></a>00114     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[2] = (char ) b3;
<a name="l00115"></a>00115     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[3] = (char ) b4;
<a name="l00116"></a>00116     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[4] = (char ) b5;
<a name="l00117"></a>00117     <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[5] = (char ) b6;
<a name="l00118"></a>00118   }
<a name="l00119"></a><a class="code" href="classmacaddress.html#a05760a84ef3f8c99788ba3161c098c9c">00119</a>   <span class="keyword">inline</span> <a class="code" href="classmacaddress.html#a05760a84ef3f8c99788ba3161c098c9c">~macaddress</a>(){}
<a name="l00120"></a><a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">00120</a>   <span class="keywordtype">char</span> <a class="code" href="classmacaddress.html#a2748e8c1410c499ad2d8842c8f98cd65">address</a>[7];
<a name="l00121"></a>00121 };
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">// RSTP class: keeps all the variables that are global in the original code.</span>
<a name="l00124"></a><a class="code" href="classrstp__bridge.html">00124</a> <span class="keyword">class </span><a class="code" href="classrstp__bridge.html">rstp_bridge</a> {
<a name="l00125"></a>00125  <span class="keyword">public</span>:
<a name="l00126"></a>00126    <span class="comment">// Constructor - receive a reference to the Luayats node object.</span>
<a name="l00127"></a>00127   <span class="comment">//   rstp_bridge(root *node, int nports, double speed[_nports], int duplex[_nports], </span>
<a name="l00128"></a>00128   <span class="comment">//           char *basemac);</span>
<a name="l00129"></a>00129    <a class="code" href="classrstp__bridge.html#a4f3d555f3c8f7ae4635023d4333b64ec">rstp_bridge</a>(<a class="code" href="classroot.html">root</a> *node, <span class="keywordtype">int</span> nports, <span class="keywordtype">char</span> *basemac);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131    <span class="comment">// Destructor</span>
<a name="l00132"></a>00132    <a class="code" href="classrstp__bridge.html#ad0fa1220ac27ce6c03beb2b9f6e7f888">~rstp_bridge</a>(<span class="keywordtype">void</span>);
<a name="l00133"></a>00133    
<a name="l00134"></a>00134 
<a name="l00135"></a>00135    <span class="comment">//tolua_end</span>
<a name="l00136"></a>00136 <span class="preprocessor">#ifdef STP_DBG</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>   <span class="keywordtype">int</span> dbg_rstp_deny;
<a name="l00138"></a>00138 <span class="preprocessor">#endif</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>   <span class="comment">//tolua_begin</span>
<a name="l00140"></a>00140 
<a name="l00141"></a>00141    <span class="comment">// Start the RSTP instances</span>
<a name="l00142"></a>00142    <span class="keywordtype">char</span> *<a class="code" href="classrstp__bridge.html#a1fde26c7e7571b59a62fff20c219b3c4">start</a>(<span class="keywordtype">int</span> vlan_id = 0, <span class="keywordtype">int</span> prio = 32768, <span class="keywordtype">char</span> *memberset = NULL);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144    <span class="comment">// Shutdown the RSTP instances</span>
<a name="l00145"></a>00145    <span class="keywordtype">char</span>* <a class="code" href="classrstp__bridge.html#af4c2f7d9c98a91e3cb8df7a183b6d65a">shutdown</a>(<span class="keywordtype">int</span> vlan_id = 0);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147    <span class="comment">// Register a callback function</span>
<a name="l00148"></a>00148    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#aab2251c5b3e201f2d6c346c4189aecb0">setcallback</a>(<span class="keywordtype">char</span> *key, <a class="code" href="yats__bind_8c.html#a974a067ac7e6511dec479c5a3aaf381f">lua_Object</a> func);
<a name="l00149"></a>00149    
<a name="l00150"></a>00150    <span class="comment">// Get reference to the bridge shell (the Luayats node object).</span>
<a name="l00151"></a><a class="code" href="classrstp__bridge.html#a79b85841f70ece778ba317778623b281">00151</a>    <span class="keyword">inline</span> <a class="code" href="classroot.html">root</a> *<a class="code" href="classrstp__bridge.html#a79b85841f70ece778ba317778623b281">get_parent</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> node;}
<a name="l00152"></a>00152 
<a name="l00153"></a>00153    <span class="comment">// Flushing method: set and get</span>
<a name="l00154"></a><a class="code" href="classrstp__bridge.html#a009828fe31ffe1ca6e2c54a262f04614">00154</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#a009828fe31ffe1ca6e2c54a262f04614">set_flushtype</a>(<a class="code" href="stp__to_8h.html#a7c0a66ef1f9c258ef724c3d86cd2daf6">LT_FLASH_TYPE_T</a> typ){flushtype = typ;}
<a name="l00155"></a><a class="code" href="classrstp__bridge.html#a996f2e54868b45afe6f454808e60ba08">00155</a>    <span class="keyword">inline</span> <a class="code" href="stp__to_8h.html#a7c0a66ef1f9c258ef724c3d86cd2daf6">LT_FLASH_TYPE_T</a> <a class="code" href="classrstp__bridge.html#a996f2e54868b45afe6f454808e60ba08">get_flushtype</a>(<span class="keywordtype">void</span>){ <span class="keywordflow">return</span> flushtype;}
<a name="l00156"></a>00156 
<a name="l00157"></a>00157    <span class="comment">//Input API - only convenience wrappers to RSTPLIB&apos;s input API routines</span>
<a name="l00158"></a>00158    <span class="comment">// 1. Create/Delete/Start/Stop</span>
<a name="l00159"></a><a class="code" href="classrstp__bridge.html#a05f0f2a1bc879d2365af15f6de5e5b02">00159</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#a05f0f2a1bc879d2365af15f6de5e5b02">init</a>(<span class="keywordtype">int</span> max_port_index){
<a name="l00160"></a>00160       <a class="code" href="stp__in_8c.html#a0a0eb67673c0687a4583f2572dfc2b3e">STP_IN_init</a>(<span class="keyword">this</span>, max_port_index);
<a name="l00161"></a>00161    }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163    <span class="comment">// Create a STP state machine</span>
<a name="l00164"></a><a class="code" href="classrstp__bridge.html#ae6761cb7017df1433c66af85ab2d7280">00164</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ae6761cb7017df1433c66af85ab2d7280">create_stpm</a>(<span class="keywordtype">int</span> vlan_id, <span class="keywordtype">char</span> *name, <a class="code" href="structtagBITMAP.html">BITMAP_T</a>* port_bmp){
<a name="l00165"></a>00165       <span class="keywordflow">return</span> <a class="code" href="stpmgmt_8c.html#afc8614b171e0e2f014760199fb03da80">STP_IN_stpm_create</a>(<span class="keyword">this</span>, vlan_id, name, port_bmp);
<a name="l00166"></a>00166    }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168    <span class="comment">// Delete a STP state machine</span>
<a name="l00169"></a><a class="code" href="classrstp__bridge.html#af48954eaaac0c1f03b3d06cb9f3e3552">00169</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#af48954eaaac0c1f03b3d06cb9f3e3552">delete_stpm</a>(<span class="keywordtype">int</span> vlan_id){
<a name="l00170"></a>00170       <span class="keywordflow">return</span> <a class="code" href="stp__in_8h.html#af517cdad06190c3ff7fa87f0b7676b49">STP_IN_stpm_delete</a>(<span class="keyword">this</span>, vlan_id);
<a name="l00171"></a>00171    }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173    <span class="comment">// Stop all STP state machines</span>
<a name="l00174"></a><a class="code" href="classrstp__bridge.html#a66ef6d7a02cc93ba3495a270a64b1032">00174</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a66ef6d7a02cc93ba3495a270a64b1032">stop_all</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> <a class="code" href="stp__in_8h.html#af494559acc0eb2d34e7fbe8f2014d56a">STP_IN_stop_all</a>(<span class="keyword">this</span>);}
<a name="l00175"></a>00175 
<a name="l00176"></a>00176    <span class="comment">// Delete all STP state machines</span>
<a name="l00177"></a><a class="code" href="classrstp__bridge.html#a22356e3cf0839c7ff6a4cebe3d37dadc">00177</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a22356e3cf0839c7ff6a4cebe3d37dadc">delete_all</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> <a class="code" href="stp__in_8h.html#a7f1d2026532ce144cbe4976b49261463">STP_IN_delete_all</a>(<span class="keyword">this</span>);}
<a name="l00178"></a>00178 
<a name="l00179"></a>00179    <span class="comment">// 2. &quot;Get&quot; management &lt;= STP</span>
<a name="l00180"></a><a class="code" href="classrstp__bridge.html#add68ab38cbd5a862a422a72a85ad6c20">00180</a>    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classrstp__bridge.html#add68ab38cbd5a862a422a72a85ad6c20">is_stpm_enabled</a>(<span class="keywordtype">int</span> vlan_id){
<a name="l00181"></a>00181      <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) <a class="code" href="stp__in_8h.html#ad58ce8a3bc107aede203ef190e6501c7">STP_IN_get_is_stpm_enabled</a>(<span class="keyword">this</span>, vlan_id);
<a name="l00182"></a>00182    }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184    <span class="comment">// Get VID from name</span>
<a name="l00185"></a><a class="code" href="classrstp__bridge.html#a98a2c96bd61ef4d41c30c772c5da8a60">00185</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a98a2c96bd61ef4d41c30c772c5da8a60">get_vlanid_by_name</a>(<span class="keywordtype">char</span> *name){
<a name="l00186"></a>00186       <span class="keywordtype">int</span> rv, vlan_id;
<a name="l00187"></a>00187       rv = <a class="code" href="stp__in_8h.html#a9021b85a21202e26fd3c3ee158c32750">STP_IN_stpm_get_vlan_id_by_name</a>(<span class="keyword">this</span>, name, &amp;vlan_id);
<a name="l00188"></a>00188       <span class="keywordflow">return</span> vlan_id;
<a name="l00189"></a>00189    }
<a name="l00190"></a>00190    
<a name="l00191"></a>00191    <span class="comment">// Get name from VID</span>
<a name="l00192"></a><a class="code" href="classrstp__bridge.html#ab5c5151f5c2ff1f06cf0c115f904d816">00192</a>    <span class="keyword">inline</span> <span class="keywordtype">char</span> *<a class="code" href="classrstp__bridge.html#ab5c5151f5c2ff1f06cf0c115f904d816">get_name_by_vlanid</a>(<span class="keywordtype">int</span> vlan_id){
<a name="l00193"></a>00193       <span class="keywordtype">int</span> rv;
<a name="l00194"></a>00194       rv = <a class="code" href="stp__in_8c.html#a2b0b5b216dbfed7b9471eff56940431c">STP_IN_stpm_get_name_by_vlan_id</a>(<span class="keyword">this</span>, vlan_id, strbuf, <span class="keyword">sizeof</span>(strbuf));
<a name="l00195"></a>00195       <span class="keywordflow">return</span> strbuf;
<a name="l00196"></a>00196    }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198    <span class="comment">// Get an error explanation</span>
<a name="l00199"></a><a class="code" href="classrstp__bridge.html#a35e19c721103626f270842e15d400961">00199</a>    <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classrstp__bridge.html#a35e19c721103626f270842e15d400961">get_error_explanation</a>(<span class="keywordtype">int</span> err){
<a name="l00200"></a>00200       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#a8c00b8768f434f4502228a2789ed4ef8">STP_IN_get_error_explanation</a>(err);
<a name="l00201"></a>00201    }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 
<a name="l00204"></a>00204    <span class="comment">// Get Spanning Tree FSM configuration</span>
<a name="l00205"></a>00205    <span class="comment">// inline void *new_container(char *which);</span>
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="classrstp__bridge.html#aea8b34a2c806756cc731e0a1267b81e0">00207</a>    <span class="keyword">inline</span> <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a> *<a class="code" href="classrstp__bridge.html#aea8b34a2c806756cc731e0a1267b81e0">get_stpmcfg</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a> *cfg){
<a name="l00208"></a>00208      <span class="keywordflow">if</span> (<a class="code" href="stp__in_8c.html#aa1d8f3f36bc53631a95f1cc4fb138c54">STP_IN_stpm_get_cfg</a>(<span class="keyword">this</span>, vlan_id, cfg) == 0)
<a name="l00209"></a>00209        <span class="keywordflow">return</span> cfg;
<a name="l00210"></a>00210      <span class="keywordflow">else</span>
<a name="l00211"></a>00211        <span class="keywordflow">return</span> NULL;
<a name="l00212"></a>00212    }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214    <span class="comment">// Get Spanning Tree FSM status</span>
<a name="l00215"></a><a class="code" href="classrstp__bridge.html#a4854c1cc59470ff547fec9e52713a005">00215</a>    <span class="keyword">inline</span> <a class="code" href="structUID__STP__STATE__T.html">UID_STP_STATE_T</a> *<a class="code" href="classrstp__bridge.html#a4854c1cc59470ff547fec9e52713a005">get_stpmstate</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__STATE__T.html">UID_STP_STATE_T</a> *state){
<a name="l00216"></a>00216      <span class="keywordflow">if</span> (<a class="code" href="stp__in_8c.html#a033548236f09141d36d89754295f3331">STP_IN_stpm_get_state</a>(<span class="keyword">this</span>, vlan_id, state) == 0)
<a name="l00217"></a>00217        <span class="keywordflow">return</span> state;
<a name="l00218"></a>00218      <span class="keywordflow">else</span>
<a name="l00219"></a>00219        <span class="keywordflow">return</span> NULL;
<a name="l00220"></a>00220    }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222    <span class="comment">// Get port Configuration</span>
<a name="l00223"></a>00223    <span class="comment">//inline UID_STP_PORT_CFG_T *get_portcfg(int vlan_id, int port_index, UID_STP_PORT_CFG_T *cfg){</span>
<a name="l00224"></a>00224    <span class="comment">//   STP_IN_port_get_cfg(this, vlan_id, port_index, cfg);</span>
<a name="l00225"></a>00225    <span class="comment">//   return cfg;</span>
<a name="l00226"></a>00226    <span class="comment">//}</span>
<a name="l00227"></a>00227 
<a name="l00228"></a>00228    <span class="comment">// Get port status</span>
<a name="l00229"></a><a class="code" href="classrstp__bridge.html#a95f6ce2255815e0606e3aca6a5efaff2">00229</a>    <span class="keyword">inline</span> <a class="code" href="structUID__STP__PORT__STATE__T.html">UID_STP_PORT_STATE_T</a> *<a class="code" href="classrstp__bridge.html#a95f6ce2255815e0606e3aca6a5efaff2">get_portstate</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__PORT__STATE__T.html">UID_STP_PORT_STATE_T</a> *state){
<a name="l00230"></a>00230      <span class="keywordflow">if</span> (<a class="code" href="stp__in_8c.html#ad31ae18c7a00e0d3a9a199d29bc20be2">STP_IN_port_get_state</a>(<span class="keyword">this</span>, vlan_id, state) == 0)
<a name="l00231"></a>00231        <span class="keywordflow">return</span> state;
<a name="l00232"></a>00232      <span class="keywordflow">else</span>
<a name="l00233"></a>00233        <span class="keywordflow">return</span> NULL;
<a name="l00234"></a>00234    }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236    <span class="comment">// 3. &quot;Set&quot; management =&gt; STP</span>
<a name="l00237"></a>00237    <span class="comment">// Set Spanning Tree FSM configuration</span>
<a name="l00238"></a><a class="code" href="classrstp__bridge.html#ad55d20ce99874018579b2de9711b246d">00238</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ad55d20ce99874018579b2de9711b246d">set_stpm_cfg</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structtagBITMAP.html">BITMAP_T</a> *port_bmp, <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a> *cfg){
<a name="l00239"></a>00239       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#a2041f1bfbc4220ef4bda58f3239dc54a">STP_IN_stpm_set_cfg</a>(<span class="keyword">this</span>, vlan_id, port_bmp, cfg);
<a name="l00240"></a>00240    }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242    <span class="comment">// Set port ocnfiguration</span>
<a name="l00243"></a><a class="code" href="classrstp__bridge.html#ae861ca10ee137fa66b926be2bc415218">00243</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ae861ca10ee137fa66b926be2bc415218">set_port_cfg</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__PORT__CFG__T.html">UID_STP_PORT_CFG_T</a>* cfg){
<a name="l00244"></a>00244       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ace6d90a183495d88f5c45a37893f9d4a">STP_IN_set_port_cfg</a>(<span class="keyword">this</span>, vlan_id, cfg);
<a name="l00245"></a>00245    }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 
<a name="l00248"></a>00248    <span class="comment">// 4. &quot;Physical&quot; events =&gt; STP</span>
<a name="l00249"></a>00249    <span class="comment">// Give the Spanning Tree FSMs a notion of time.</span>
<a name="l00250"></a><a class="code" href="classrstp__bridge.html#aa408ecc3c0496e7e957c6bf912a17747">00250</a>    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#aa408ecc3c0496e7e957c6bf912a17747">one_second</a>(<span class="keywordtype">void</span>){
<a name="l00251"></a>00251       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#a6bcbd27c8deeb70cd7db1cc075fcaf24">STP_IN_one_second</a>(<span class="keyword">this</span>);
<a name="l00252"></a>00252    }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254    <span class="comment">// Enable/disable given port</span>
<a name="l00255"></a><a class="code" href="classrstp__bridge.html#a7e3355f18403eb8b0b8954fa50aebdbb">00255</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a7e3355f18403eb8b0b8954fa50aebdbb">enable_port</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">bool</span> ena){
<a name="l00256"></a>00256       <span class="keywordflow">if</span> (ena == <span class="keyword">true</span>){
<a name="l00257"></a>00257          <a class="code" href="bitmap_8h.html#ae9694ff688a38a0a9e47d79f02112175">BitmapSetBit</a>(&amp;enabled_ports, port_index - 1);
<a name="l00258"></a>00258       } <span class="keywordflow">else</span> {
<a name="l00259"></a>00259          <a class="code" href="bitmap_8h.html#a1db13c1a8ea7e0273b972a595ae16161">BitmapClearBit</a>(&amp;enabled_ports, port_index - 1);
<a name="l00260"></a>00260       }
<a name="l00261"></a>00261       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#a49b58be2bee2485777be01be2485d465">STP_IN_enable_port</a>(<span class="keyword">this</span>, port_index, (ena == <span class="keyword">true</span>) ? 1 : 0);
<a name="l00262"></a>00262    }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264    <span class="comment">// Link Up event</span>
<a name="l00265"></a><a class="code" href="classrstp__bridge.html#af8a1f34afab97a0f6da47f25cd96a4a1">00265</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#af8a1f34afab97a0f6da47f25cd96a4a1">linkUp</a>(<span class="keywordtype">int</span> port_index){
<a name="l00266"></a>00266      <span class="comment">// leu:  return STP_IN_enable_port(this, port_index, 1);</span>
<a name="l00267"></a>00267      <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ad11d33ce0fdbad8ee6e0ea1adb897a3d">STP_IN_up_port</a>(<span class="keyword">this</span>, port_index, 1);
<a name="l00268"></a>00268    }
<a name="l00269"></a>00269    
<a name="l00270"></a>00270    <span class="comment">// Link Down event</span>
<a name="l00271"></a><a class="code" href="classrstp__bridge.html#a2a204da4004374f9d21539ef963ac843">00271</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a2a204da4004374f9d21539ef963ac843">linkDown</a>(<span class="keywordtype">int</span> port_index){
<a name="l00272"></a>00272      <span class="comment">//leu:   return STP_IN_enable_port(this, port_index, 0);</span>
<a name="l00273"></a>00273      <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ad11d33ce0fdbad8ee6e0ea1adb897a3d">STP_IN_up_port</a>(<span class="keyword">this</span>, port_index, 0);
<a name="l00274"></a>00274    }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276    <span class="comment">// Change a port&apos;s speed</span>
<a name="l00277"></a><a class="code" href="classrstp__bridge.html#af038c9eef913196621aa49743619f513">00277</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#af038c9eef913196621aa49743619f513">change_port_speed</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">long</span> speed){
<a name="l00278"></a>00278       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ac328041c17bbfbcb4983eaa286ec77cd">STP_IN_changed_port_speed</a>(<span class="keyword">this</span>, port_index, speed);
<a name="l00279"></a>00279    }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281    <span class="comment">// Change a port&apos;s duplex mode</span>
<a name="l00282"></a><a class="code" href="classrstp__bridge.html#abb7e753fdd17d2926ba2591e1b0e9dfd">00282</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#abb7e753fdd17d2926ba2591e1b0e9dfd">change_port_duplex</a>(<span class="keywordtype">int</span> port_index){
<a name="l00283"></a>00283       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ac91460c146601f39200ad79feabc8734">STP_IN_changed_port_duplex</a>(<span class="keyword">this</span>, port_index);
<a name="l00284"></a>00284    }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286    <span class="comment">// Check header of a BPDU</span>
<a name="l00287"></a><a class="code" href="classrstp__bridge.html#a7d35c59b302a5cbea5bad1cf0a893b19">00287</a>    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a7d35c59b302a5cbea5bad1cf0a893b19">check_bpdu_header</a>(<a class="code" href="structstp__bpdu__t.html">BPDU_T</a> *bpdu, <span class="keywordtype">size_t</span> len){
<a name="l00288"></a>00288       <span class="keywordflow">return</span> <a class="code" href="stp__in_8c.html#ac3a3ccfcc58d8a39290cdc79be40ea4e">STP_IN_check_bpdu_header</a>(bpdu, len);
<a name="l00289"></a>00289    }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291    <span class="comment">// Hand-over a received BPDU to the spanning tree FSMs.</span>
<a name="l00292"></a>00292    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#a859bb6c5a5e27925bff395bb2307685a">rx_bpdu</a>(<span class="keywordtype">int</span> vlan_id, <span class="keywordtype">int</span> port_index, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *bpdu, <span class="keywordtype">size_t</span> len);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294    <span class="comment">// Turn on tracing of port state machines */</span>
<a name="l00295"></a>00295    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#af7d649e67f10a18a171a66ccc9d58dc6">set_port_trace</a>(<span class="keywordtype">char</span> *mach_name, <span class="keywordtype">int</span> vlan_id, <span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> enadis);
<a name="l00296"></a>00296    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#ad5f1f260724c8092c3bd98372c9bf0f6">set_stpm_trace</a>(<span class="keywordtype">int</span> vlan_id, <span class="keywordtype">int</span> enadis);
<a name="l00297"></a>00297    <span class="comment">// Output API: </span>
<a name="l00298"></a>00298    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#acf808dddba00fc1df9a370f728a877e4">flush_fdb</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <a class="code" href="stp__to_8h.html#a7c0a66ef1f9c258ef724c3d86cd2daf6">LT_FLASH_TYPE_T</a> typ, <span class="keywordtype">char</span> *reason);
<a name="l00299"></a>00299    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#af51843eba6c8ab47199b7b9aa0ac0d2f">get_mac</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *mac);
<a name="l00300"></a>00300    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classrstp__bridge.html#ab6176867357b7c1753db5ef8376e31ec">get_speed</a>(<span class="keywordtype">int</span> port_index);
<a name="l00301"></a>00301    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#a6e4b006ceedff69f91f98e1b18a44e64">set_speed</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> speed);
<a name="l00302"></a>00302    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a9eef9ffb28341dc9ef176606bc144282">get_linkstatus</a>(<span class="keywordtype">int</span> port_index);
<a name="l00303"></a>00303    <span class="keywordtype">void</span> <a class="code" href="classrstp__bridge.html#aa522651ce1e7f177e4be622d1235d2e3">set_duplex</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> duplex);
<a name="l00304"></a>00304    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ad952baa113353895dbe3f2de40e09163">get_duplex</a>(<span class="keywordtype">int</span> port_index);
<a name="l00305"></a>00305    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a2153d4454af9c59b85d764b51be8ee0d">set_learning</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <span class="keywordtype">int</span> enable);
<a name="l00306"></a>00306    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ad958c5941d9ef31f2204f06722baea62">set_forwarding</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <span class="keywordtype">int</span> enable);
<a name="l00307"></a>00307    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a238efef4b33c8a066ab916ea820af246">set_portstate</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <a class="code" href="uid__stp_8h.html#a736b198b54dec0c3492f2bd15017ce83">RSTP_PORT_STATE</a> state);
<a name="l00308"></a>00308    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a949b68639a1577308b0fed416d98987c">tx_bpdu</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *bpdu, <span class="keywordtype">size_t</span> len);
<a name="l00309"></a>00309    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classrstp__bridge.html#ac3df94145c0c2fd63081cb3474d5bbec">get_portname</a>(<span class="keywordtype">int</span> port_index);
<a name="l00310"></a>00310    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="classrstp__bridge.html#ad5dab3b17483768b2001d30602440136">get_init_port_pathcost</a>(<span class="keywordtype">int</span> port_index);
<a name="l00311"></a>00311    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#af9dcaa6f7b052a174d2ff700d3b22dbd">get_init_stpm_cfg</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__CFG__T.html">UID_STP_CFG_T</a> *cfg);
<a name="l00312"></a>00312    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a5e0fce79a3983555e79b385799a10916">get_init_port_cfg</a>(<span class="keywordtype">int</span> port_index, <span class="keywordtype">int</span> vlan_id, <a class="code" href="structUID__STP__PORT__CFG__T.html">UID_STP_PORT_CFG_T</a> *cfg);
<a name="l00313"></a>00313    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a7c3c1a302ebcd0496827a1d420d2ce68">set_hardware_mode</a>(<span class="keywordtype">int</span> vlan_id, <a class="code" href="uid__stp_8h.html#a40021690aed47443e4525da058bf6ebc">UID_STP_MODE_T</a> mode);
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="classrstp__bridge.html#a4cc07824a20c92b67e792dcfbc02bcf9">00315</a>    <a class="code" href="structstpm__t.html">STPM_T</a> *<a class="code" href="classrstp__bridge.html#a4cc07824a20c92b67e792dcfbc02bcf9">bridges</a>;      <span class="comment">// pointer to bridges - one per VLAN</span>
<a name="l00316"></a><a class="code" href="classrstp__bridge.html#a3807230f735a64e03de6e6fd440b5822">00316</a>    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#a3807230f735a64e03de6e6fd440b5822">max_port</a>;         <span class="comment">// Max. # of ports in total</span>
<a name="l00317"></a>00317    <span class="comment">//tolua_end</span>
<a name="l00318"></a><a class="code" href="classrstp__bridge.html#aa50a91baa97eafcabc19ad1484bbc9ee">00318</a>    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#aa50a91baa97eafcabc19ad1484bbc9ee">nev</a>;              <span class="comment">// event handling</span>
<a name="l00319"></a><a class="code" href="classrstp__bridge.html#a42c34e5043987dc3b743dd2a085a63a6">00319</a>    <a class="code" href="base_8h.html#afbe09d227d3e09964b59eed61a8e88d9">RSTP_EVENT_T</a> <a class="code" href="classrstp__bridge.html#a42c34e5043987dc3b743dd2a085a63a6">tev</a>;     <span class="comment">// event handling</span>
<a name="l00320"></a><a class="code" href="classrstp__bridge.html#ad0eea076af7209f68e19aeebc0fa6df7">00320</a>    <span class="keywordtype">int</span> <a class="code" href="classrstp__bridge.html#ad0eea076af7209f68e19aeebc0fa6df7">debug</a>;
<a name="l00321"></a>00321  <span class="keyword">private</span>:
<a name="l00322"></a>00322    <a class="code" href="structtagBITMAP.html">BITMAP_T</a> enabled_ports;   <span class="comment">// bitmap of enabled ports</span>
<a name="l00323"></a>00323    <span class="comment">// -- Global variables of the RSTPLIB package. </span>
<a name="l00324"></a>00324    <span class="comment">//    We need to instantiate them in a class</span>
<a name="l00325"></a>00325    <span class="keywordtype">char</span> *errmsg;             <span class="comment">// buffer to error messages</span>
<a name="l00326"></a>00326    <span class="keywordtype">char</span> strbuf[64];          <span class="comment">// general string buffer</span>
<a name="l00327"></a>00327    <a class="code" href="classroot.html">root</a> *node;               <span class="comment">// reference to Luayats node object</span>
<a name="l00328"></a>00328    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **mac;
<a name="l00329"></a>00329    <span class="keywordtype">char</span> **portname;
<a name="l00330"></a>00330    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *speed;
<a name="l00331"></a>00331    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *pathcost;
<a name="l00332"></a>00332    <span class="keywordtype">int</span> *duplex;
<a name="l00333"></a>00333    <a class="code" href="stp__to_8h.html#a7c0a66ef1f9c258ef724c3d86cd2daf6">LT_FLASH_TYPE_T</a> flushtype; <span class="comment">// defines type of address table flushing</span>
<a name="l00334"></a>00334 }; <span class="comment">//tolua_export</span>
<a name="l00335"></a>00335 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Sun Feb 14 12:31:42 2010 for Luayats by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
